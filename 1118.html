<html>
<head>
	<script src="chroma.js"></script>
	<script src="audioFileReader.js"></script>
	<script src="dsp.js"></script>


</head>
<body>
	<div style="width:1280; height:360">
	<canvas id="plottingCanvas" width="1280" height="360" style="position:absolute; left:0 px; top:0 px; z-index:1;"></canvas>
	<canvas id="interfaceCanvas" width="1280" height="360" style="position:absolute; left:0 px; top:0 px; z-index:2;"></canvas>
	</div>
	<div>
	<input id="fileChooseInput" type="file"></input>
	</div>

	<div id="menu">
	<button class="btn btn-primary" data-action="pause">
		<i class="glyphicon glyphicon-play"></i>
		Pause
	</button>
	<button class="btn btn-primary" data-action="play">
		<i class="glyphicon glyphicon-play"></i>
		Play
	</button>
	<button class="btn btn-primary" data-action="stop">
		<i class="glyphicon glyphicon-play"></i>
		Stop
	</button>
	<button class="btn btn-primary" data-action="saveImage">
		<i class="glyphicon glyphicon-play"></i>
		Save Image
	</button>
	</div>


</body>

<script>

function Menu(elem) {
  elem.onclick = function(e) {
    var target = e && e.target || event.srcElement
    var action = target.getAttribute('data-action')
    if (action=="play" && playingOn == false) {
    	playSound(audioFile);
    }
    else if(action=="pause") {
    	pause();
    }
    else if(action=="stop") {
    	stop();
    }
    if (action=="saveImage") {
    	var plotCanvas=document.getElementById("plottingCanvas");
    	window.open(plotCanvas.toDataURL('image/png'));

    	window.open(document.getElementById("plottingCanvas").toDataURL("image/png").replace(/^data:image\/[^;]/, 'data:application/octet-stream'));
    }
  }
}
new Menu(document.getElementById('menu'))



var plottingCanvasWidth = document.getElementById("plottingCanvas").width;
var plottingCanvasHeight = document.getElementById("plottingCanvas").height;



</script>
</html>
